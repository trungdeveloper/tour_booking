!function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(n){return t.Bloodhound=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function($){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(t){return t instanceof $},toStr:function e(n){return t.isUndefined(n)||null===n?"":n+""},bind:$.proxy,each:function(t,e){function n(t,n){return e(n,t)}$.each(t,n)},map:$.map,filter:$.grep,every:function(t,e){var n=!0;return t?($.each(t,function(i,r){return(n=e.call(null,r,i,t))?void 0:!1}),!!n):n},some:function(t,e){var n=!1;return t?($.each(t,function(i,r){return(n=e.call(null,r,i,t))?!1:void 0}),!!n):n},mixin:$.extend,identity:function(t){return t},clone:function(t){return $.extend(!0,{},t)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function n(t){function e(){return String(t)}return $.isFunction(t)?t:e},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s=this,o=arguments,u,a;return u=function(){i=null,n||(r=t.apply(s,o))},a=n&&!i,clearTimeout(i),i=setTimeout(u,e),a&&(r=t.apply(s,o)),r}},throttle:function(t,e){var n,i,r,s,o,u;return o=0,u=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var a=new Date,c=e-(a-o);return n=this,i=arguments,0>=c?(clearTimeout(r),r=null,o=a,s=t.apply(n,i)):r||(r=setTimeout(u,c)),s}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),e="0.11.1",n=function(){"use strict";function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function i(e){return function n(i){return i=t.isArray(i)?i:[].slice.call(arguments,0),function r(n){var r=[];return t.each(i,function(i){r=r.concat(e(t.toStr(n[i])))}),r}}}return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}}}(),i=function(){"use strict";function e(e){this.maxSize=t.isNumber(e)?e:100,this.reset(),this.maxSize<=0&&(this.set=this.get=$.noop)}function n(){this.head=this.tail=null}function i(t,e){this.key=t,this.val=e,this.prev=this.next=null}return t.mixin(e.prototype,{set:function r(t,e){var n=this.list.tail,r;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key],this.size--),(r=this.hash[t])?(r.val=e,this.list.moveToFront(r)):(r=new i(t,e),this.list.add(r),this.hash[t]=r,this.size++)},get:function s(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function o(){this.size=0,this.hash={},this.list=new n}}),t.mixin(n.prototype,{add:function u(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function a(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),e}(),r=function(){"use strict";function e(e,n){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix)),this.ls=n||o,!this.ls&&this._noop()}function n(){return(new Date).getTime()}function i(e){return JSON.stringify(t.isUndefined(e)?null:e)}function r(t){return $.parseJSON(t)}function s(t){var e,n,i=[],r=o.length;for(e=0;r>e;e++)(n=o.key(e)).match(t)&&i.push(n.replace(t,""));return i}var o;try{o=window.localStorage,o.setItem("~~~","!"),o.removeItem("~~~")}catch(u){o=null}return t.mixin(e.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=t.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(n){"QuotaExceededError"===n.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),r(this.ls.getItem(this._prefix(t)))},set:function(e,r,s){return t.isNumber(s)?this._safeSet(this._ttlKey(e),i(n()+s)):this.ls.removeItem(this._ttlKey(e)),this._safeSet(this._prefix(e),i(r))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=s(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(e){var i=r(this.ls.getItem(this._ttlKey(e)));return t.isNumber(i)&&n()>i?!0:!1}}),e}(),s=function(){"use strict";function e(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new i(0):o}var n=0,r={},s=6,o=new i(10);return e.setMaxPendingRequests=function u(t){s=t},e.resetCache=function a(){o.reset()},t.mixin(e.prototype,{_fingerprint:function c(t){return t=t||{},t.url+t.type+$.param(t.data||{})},_get:function(t,e){function i(t){e(null,t),a._cache.set(c,t)}function o(){e(!0)}function u(){n--,delete r[c],a.onDeckRequestArgs&&(a._get.apply(a,a.onDeckRequestArgs),a.onDeckRequestArgs=null)}var a=this,c,h;c=this._fingerprint(t),this.cancelled||c!==this.lastReq||((h=r[c])?h.done(i).fail(o):s>n?(n++,r[c]=this._send(t).done(i).fail(o).always(u)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,n){var i,r;n=n||$.noop,e=t.isString(e)?{url:e}:e||{},r=this._fingerprint(e),this.cancelled=!1,this.lastReq=r,(i=this._cache.get(r))?n(null,i):this._get(e,n)},cancel:function(){this.cancelled=!0}}),e}(),o=window.SearchIndex=function(){"use strict";function e(e){e=e||{},e.datumTokenizer&&e.queryTokenizer||$.error("datumTokenizer and queryTokenizer are both required"),this.identify=e.identify||t.stringify,this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.reset()}function n(e){return e=t.filter(e,function(t){return!!t}),e=t.map(e,function(t){return t.toLowerCase()})}function i(){var t={};return t[u]=[],t[o]={},t}function r(t){for(var e={},n=[],i=0,r=t.length;r>i;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function s(t,e){var n=0,i=0,r=[];t=t.sort(),e=e.sort();for(var s=t.length,o=e.length;s>n&&o>i;)t[n]<e[i]?n++:t[n]>e[i]?i++:(r.push(t[n]),n++,i++);return r}var o="c",u="i";return t.mixin(e.prototype,{bootstrap:function a(t){this.datums=t.datums,this.trie=t.trie},add:function(e){var r=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var s,a;r.datums[s=r.identify(e)]=e,a=n(r.datumTokenizer(e)),t.each(a,function(t){var e,n,a;for(e=r.trie,n=t.split("");a=n.shift();)e=e[o][a]||(e[o][a]=i()),e[u].push(s)})})},get:function c(e){var n=this;return t.map(e,function(t){return n.datums[t]})},search:function h(e){var i=this,a,c;return a=n(this.queryTokenizer(e)),t.each(a,function(t){var e,n,r,a;if(c&&0===c.length)return!1;for(e=i.trie,n=t.split("");e&&(r=n.shift());)e=e[o][r];return e&&0===n.length?(a=e[u].slice(0),void(c=c?s(c,a):a)):(c=[],!1)}),c?t.map(r(c),function(t){return i.datums[t]}):[]},all:function l(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function f(){this.datums={},this.trie=i()},serialize:function d(){return{datums:this.datums,trie:this.trie}}}),e}(),u=function(){"use strict";function e(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new r(t.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},t.mixin(e.prototype,{_settings:function i(){return{url:this.url,type:"GET",dataType:"json"}},store:function s(t){this.cache&&(this.storage.set(n.data,t,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function o(){var t={},e;return this.cache?(t.data=this.storage.get(n.data),t.protocol=this.storage.get(n.protocol),t.thumbprint=this.storage.get(n.thumbprint),e=t.thumbprint!==this.thumbprint||t.protocol!==location.protocol,t.data&&!e?t.data:null):null},fromNetwork:function(t){function e(){t(!0)}function n(e){t(null,i.transform(e))}var i=this,r;t&&(r=this.prepare(this._settings()),this.transport(r).fail(e).done(n))},clear:function u(){return this.storage.clear(),this}}),e}(),a=function(){"use strict";function e(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new s({cache:t.cache,limiter:t.limiter,transport:t.transport})}return t.mixin(e.prototype,{_settings:function n(){return{url:this.url,type:"GET",dataType:"json"}},get:function i(t,e){function n(t,n){e(t?[]:i.transform(n))}var i=this,r;if(e)return t=t||"",r=this.prepare(t,this._settings()),this.transport.get(r,n)},cancelLastRequest:function r(){this.transport.cancel()}}),e}(),c=function(){"use strict";function n(n){var i;return n?(i={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:t.identity,transform:t.identity,transport:null},n=t.isString(n)?{url:n}:n,n=t.mixin(i,n),!n.url&&$.error("prefetch requires url to be set"),n.transform=n.filter||n.transform,n.cacheKey=n.cacheKey||n.url,n.thumbprint=e+n.thumbprint,n.transport=n.transport?o(n.transport):$.ajax,n):null}function i(e){var n;if(e)return n={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:t.identity,transport:null},e=t.isString(e)?{url:e}:e,e=t.mixin(n,e),!e.url&&$.error("remote requires url to be set"),e.transform=e.filter||e.transform,e.prepare=r(e),e.limiter=s(e),e.transport=e.transport?o(e.transport):$.ajax,delete e.replace,delete e.wildcard,delete e.rateLimitBy,delete e.rateLimitWait,e}function r(t){function e(t,e){return e.url=s(e.url,t),e}function n(t,e){return e.url=e.url.replace(o,encodeURIComponent(t)),e}function i(t,e){return e}var r,s,o;return r=t.prepare,s=t.replace,o=t.wildcard,r?r:r=s?e:t.wildcard?n:i}function s(e){function n(e){return function n(i){return t.debounce(i,e)}}function i(e){return function n(i){return t.throttle(i,e)}}var r,s,o;return r=e.limiter,s=e.rateLimitBy,o=e.rateLimitWait,r||(r=/^throttle$/i.test(s)?i(o):n(o)),r}function o(e){return function n(i){function r(e){t.defer(function(){o.resolve(e)})}function s(e){t.defer(function(){o.reject(e)})}var o=$.Deferred();return e(i,r,s),o}}return function u(e){var r,s;return r={initialize:!0,identify:t.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},e=t.mixin(r,e||{}),!e.datumTokenizer&&$.error("datumTokenizer is required"),!e.queryTokenizer&&$.error("queryTokenizer is required"),s=e.sorter,e.sorter=s?function(t){return t.sort(s)}:t.identity,e.local=t.isFunction(e.local)?e.local():e.local,e.prefetch=n(e.prefetch),e.remote=i(e.remote),e}}(),h=function(){"use strict";function e(t){t=c(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new a(t.remote):null,this.prefetch=t.prefetch?new u(t.prefetch):null,this.index=new o({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var i;return i=window&&window.Bloodhound,e.noConflict=function r(){return window&&(window.Bloodhound=i),e},e.tokenizers=n,t.mixin(e.prototype,{__ttAdapter:function h(){function t(t,e,i){return n.search(t,e,i)}function e(t,e){return n.search(t,e)}var n=this;return this.remote?t:e},_loadPrefetch:function l(){function t(t,i){return t?n.reject():(e.add(i),e.prefetch.store(e.index.serialize()),void n.resolve())}var e=this,n,i;return n=$.Deferred(),this.prefetch?(i=this.prefetch.fromCache())?(this.index.bootstrap(i),n.resolve()):this.prefetch.fromNetwork(t):n.resolve(),n.promise()},_initialize:function f(){function t(){e.add(e.local)}var e=this,n;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function d(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function p(t){return this.index.add(t),this},get:function g(e){return e=t.isArray(e)?e:[].slice.call(arguments),this.index.get(e)},search:function m(e,n,i){function r(e){var n=[];t.each(e,function(e){!t.some(o,function(t){return s.identify(e)===s.identify(t)})&&n.push(e)}),i&&i(n)}var s=this,o;return o=this.sorter(this.index.search(e)),n(this.remote?o.slice():o),this.remote&&o.length<this.sufficient?this.remote.get(e,r):this.remote&&this.remote.cancelLastRequest(),this},all:function y(){return this.index.all()},clear:function v(){return this.index.reset(),this},clearPrefetchCache:function _(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function b(){return s.resetCache(),this},ttAdapter:function w(){return this.__ttAdapter()}}),e}();return h}),function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function($){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(t){return t instanceof $},toStr:function e(n){return t.isUndefined(n)||null===n?"":n+""},bind:$.proxy,each:function(t,e){function n(t,n){return e(n,t)}$.each(t,n)},map:$.map,filter:$.grep,every:function(t,e){var n=!0;return t?($.each(t,function(i,r){return(n=e.call(null,r,i,t))?void 0:!1}),!!n):n},some:function(t,e){var n=!1;return t?($.each(t,function(i,r){return(n=e.call(null,r,i,t))?!1:void 0}),!!n):n},mixin:$.extend,identity:function(t){return t},clone:function(t){return $.extend(!0,{},t)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function n(t){function e(){return String(t)}return $.isFunction(t)?t:e},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s=this,o=arguments,u,a;return u=function(){i=null,n||(r=t.apply(s,o))},a=n&&!i,clearTimeout(i),i=setTimeout(u,e),a&&(r=t.apply(s,o)),r}},throttle:function(t,e){var n,i,r,s,o,u;return o=0,u=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var a=new Date,c=e-(a-o);return n=this,i=arguments,0>=c?(clearTimeout(r),r=null,o=a,s=t.apply(n,i)):r||(r=setTimeout(u,c)),s}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),e=function(){"use strict";function e(e){var o,u;return u=t.mixin({},s,e),o={css:r(),classes:u,html:n(u),selectors:i(u)},{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(e){t.mixin(e,o)}}}function n(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function i(e){var n={};return t.each(e,function(t,e){n[e]="."+t}),n}function r(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e}var s={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return e}(),n=function(){"use strict";function e(t){t&&t.el||$.error("EventBus initialized without el"),this.$el=$(t.el)}var n,i;return n="typeahead:",i={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},t.mixin(e.prototype,{_trigger:function(t,e){var i;return i=$.Event(n+t),(e=e||[]).unshift(i),this.$el.trigger.apply(this.$el,e),i},before:function(t){var e,n;return e=[].slice.call(arguments,1),n=this._trigger("before"+t,e),n.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=i[t])&&this._trigger(e,[].slice.call(arguments,1))}}),e}(),i=function(){"use strict";function t(t,e,n,i){var r;if(!n)return this;for(e=e.split(a),n=i?u(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(a);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,o;if(!this._callbacks)return this;for(t=t.split(a),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=s(n.sync,this,[e].concat(i)),o=s(n.async,this,[e].concat(i)),r()&&c(o);return this}function s(t,e,n){function i(){for(var i,r=0,s=t.length;!i&&s>r;r+=1)i=t[r].apply(e,n)===!1;return!i}return i}function o(){var t;return t=window.setImmediate?function e(t){setImmediate(function(){t()})}:function n(t){setTimeout(function(){t()},0)}}function u(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var a=/\s+/,c=o();return{onSync:n,onAsync:e,off:i,trigger:r}}(),r=function(e){"use strict";function n(e,n,i){for(var r=[],s,o=0,u=e.length;u>o;o++)r.push(t.escapeRegExChars(e[o]));return s=i?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",n?new RegExp(s):new RegExp(s,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function r(s){function o(t){var n,i,r;return(n=a.exec(t.data))&&(r=e.createElement(s.tagName),s.className&&(r.className=s.className),i=t.splitText(n.index),i.splitText(n[0].length),r.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(r,i)),!!n}function u(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)n=t.childNodes[r],n.nodeType===i?r+=e(n)?1:0:u(n,e)}var a;s=t.mixin({},i,s),s.node&&s.pattern&&(s.pattern=t.isArray(s.pattern)?s.pattern:[s.pattern],a=n(s.pattern,s.caseSensitive,s.wordsOnly),u(s.node,o))}}(window.document),s=function(){"use strict";function e(e,i){e=e||{},e.input||$.error("input is missing"),i.mixin(this),this.$hint=$(e.hint),this.$input=$(e.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop)}function n(t){return $('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function r(t,n){return e.normalizeQuery(t)===e.normalizeQuery(n)}function s(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var o;return o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},e.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(e.prototype,i,{_onBlur:function u(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function a(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function c(t){var e=o[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function h(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function l(t,e){var n;switch(t){case"up":case"down":n=!s(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function f(t,e){var n;switch(t){case"tab":n=!s(e);break;default:n=!0}return n},_checkLanguageDirection:function d(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function p(t,e){var n,i;n=r(t,this.query),i=n?this.query.length!==t.length:!1,this.query=t,e||n?!e&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var e=this,n,i,r,s;return n=t.bind(this._onBlur,this),i=t.bind(this._onFocus,this),r=t.bind(this._onKeydown,this),s=t.bind(this._onInput,this),this.$input.on("blur.tt",n).on("focus.tt",i).on("keydown.tt",r),!t.isMsie()||t.isMsie()>9?this.$input.on("input.tt",s):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(n){o[n.which||n.keyCode]||t.defer(t.bind(e._onInput,e,n))}),this},focus:function g(){this.$input.focus()},blur:function m(){this.$input.blur()},getLangDir:function y(){return this.dir},getQuery:function v(){return this.query||""},setQuery:function _(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function b(){return this.query!==this.queryWhenFocused},getInputValue:function w(){return this.$input.val()},setInputValue:function S(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function x(){this.setInputValue(this.query)},getHint:function A(){return this.$hint.val()},setHint:function k(t){this.$hint.val(t)},clearHint:function C(){this.setHint("")},clearHintIfInvalid:function q(){var t,e,n,i;t=this.getInputValue(),e=this.getHint(),n=t!==e&&0===e.indexOf(t),i=""!==t&&n&&!this.hasOverflow(),!i&&this.clearHint()},hasFocus:function T(){return this.$input.is(":focus")},hasOverflow:function D(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:document.selection?(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length):!0},destroy:function I(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=$("<div>")}}),e}(),o=function(){"use strict";function e(e,i){e=e||{},e.templates=e.templates||{},e.templates.notFound=e.templates.notFound||e.templates.empty,e.source||$.error("missing source"),e.node||$.error("missing node"),e.name&&!o(e.name)&&$.error("invalid dataset name: "+e.name),i.mixin(this),this.highlight=!!e.highlight,this.name=e.name||a(),this.limit=e.limit||5,this.displayFn=n(e.display||e.displayKey),this.templates=s(e.templates,this.displayFn),this.source=e.source.__ttAdapter?e.source.__ttAdapter():e.source,this.async=t.isUndefined(e.async)?this.source.length>2:!!e.async,this._resetLastSuggestion(),this.$el=$(e.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(e){function n(t){return t[e]}return e=e||t.stringify,t.isFunction(e)?e:n}function s(e,n){function i(t){return $("<div>").text(n(t))}return{notFound:e.notFound&&t.templatify(e.notFound),pending:e.pending&&t.templatify(e.pending),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||i}}function o(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var u,a;return u={val:"tt-selectable-display",obj:"tt-selectable-object"},a=t.getIdGenerator(),e.extractData=function c(t){var e=$(t);return e.data(u.obj)?{val:e.data(u.val)||"",obj:e.data(u.obj)||null}:null},t.mixin(e.prototype,i,{_overwrite:function h(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function l(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function f(t,e){var n;n=this._getSuggestionsFragment(t,e),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function d(t,e){var n,i;n=this._getSuggestionsFragment(t,e),i=n.children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function p(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function g(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function m(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function y(e,n){var i=this,s;return s=document.createDocumentFragment(),t.each(n,function o(t){var n,r;r=i._injectQuery(e,t),n=$(i.templates.suggestion(r)).data(u.obj,t).data(u.val,i.displayFn(t)).addClass(i.classes.suggestion+" "+i.classes.selectable),s.appendChild(n[0])}),this.highlight&&r({className:this.classes.highlight,node:s,pattern:e}),$(s)},_getFooter:function v(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function _(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function b(){this.$lastSuggestion=$()},_injectQuery:function w(e,n){return t.isObject(n)?t.mixin({_query:e},n):n},update:function S(t){function e(e){s||(s=!0,e=(e||[]).slice(0,i.limit),o=e.length,i._overwrite(t,e),o<i.limit&&i.async&&i.trigger("asyncRequested",t))}function n(e){e=e||[],!r&&o<i.limit&&(i.cancel=$.noop,o+=e.length,i._append(t,e.slice(0,i.limit-o)),i.async&&i.trigger("asyncReceived",t))}var i=this,r=!1,s=!1,o=0;this.cancel(),this.cancel=function u(){r=!0,i.cancel=$.noop,i.async&&i.trigger("asyncCanceled",t)},this.source(t,e,n),!s&&e([])},cancel:$.noop,clear:function x(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function A(){return this.$el.is(":empty")},destroy:function k(){this.$el=$("<div>")}}),e}(),u=function(){"use strict";function e(e,n){function i(t){var e=r.$node.find(t.node).first();return t.node=e.length?e:$("<div>").appendTo(r.$node),new o(t,n)}var r=this;e=e||{},e.node||$.error("node is required"),n.mixin(this),this.$node=$(e.node),this.query=null,this.datasets=t.map(e.datasets,i)}return t.mixin(e.prototype,i,{_onSelectableClick:function n(t){this.trigger("selectableClicked",$(t.currentTarget))},_onRendered:function r(t,e,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,n,i)},_onCleared:function s(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function u(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function a(){function e(t){return t.isEmpty()}return t.every(this.datasets,e)},_getSelectables:function c(){return this.$node.find(this.selectors.selectable)},_removeCursor:function h(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function l(t){var e,n,i,r;e=t.position().top,n=e+t.outerHeight(!0),i=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>e?this.$node.scrollTop(i+e):n>r&&this.$node.scrollTop(i+(n-r))},bind:function(){var e=this,n;return n=t.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,n),t.each(this.datasets,function(t){t.onSync("asyncRequested",e._propagate,e).onSync("asyncCanceled",e._propagate,e).onSync("asyncReceived",e._propagate,e).onSync("rendered",e._onRendered,e).onSync("cleared",e._onCleared,e)}),this},isOpen:function f(){return this.$node.hasClass(this.classes.open)},open:function d(){this.$node.addClass(this.classes.open)},close:function p(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function g(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function m(t){var e,n,i,r;return n=this.getActiveSelectable(),e=this._getSelectables(),i=n?e.index(n):-1,r=i+t,r=(r+1)%(e.length+1)-1,r=-1>r?e.length-1:r,-1===r?null:e.eq(r)},setCursor:function y(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function v(t){return t&&t.length?o.extractData(t):null},getActiveSelectable:function _(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function b(){var t=this._getSelectables().first();return t.length?t:null},update:function w(e){function n(t){t.update(e)}var i=e!==this.query;return i&&(this.query=e,t.each(this.datasets,n)),i},empty:function S(){function e(t){t.clear()}t.each(this.datasets,e),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function x(){function e(t){t.destroy()}this.$node.off(".tt"),this.$node=$("<div>"),t.each(this.datasets,e)}}),e}(),a=function(){"use strict";function e(){u.apply(this,[].slice.call(arguments,0))}var n=u.prototype;return t.mixin(e.prototype,u.prototype,{open:function i(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function r(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function s(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function o(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function a(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function c(){this.$node.hide()},_show:function h(){this.$node.css("display","block")}}),e}(),c=function(){"use strict";function e(e,i){var r,s,o,u,a,c,h,l,f,d,p;e=e||{},e.input||$.error("missing input"),e.menu||$.error("missing menu"),e.eventBus||$.error("missing event bus"),i.mixin(this),this.eventBus=e.eventBus,this.minLength=t.isNumber(e.minLength)?e.minLength:1,this.input=e.input,this.menu=e.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),r=n(this,"activate","open","_onFocused"),s=n(this,"deactivate","_onBlurred"),o=n(this,"isActive","isOpen","_onEnterKeyed"),u=n(this,"isActive","isOpen","_onTabKeyed"),a=n(this,"isActive","_onEscKeyed"),c=n(this,"isActive","open","_onUpKeyed"),h=n(this,"isActive","open","_onDownKeyed"),l=n(this,"isActive","isOpen","_onLeftKeyed"),f=n(this,"isActive","isOpen","_onRightKeyed"),d=n(this,"_openIfActive","_onQueryChanged"),p=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",r,this).onSync("blurred",s,this).onSync("enterKeyed",o,this).onSync("tabKeyed",u,this).onSync("escKeyed",a,this).onSync("upKeyed",c,this).onSync("downKeyed",h,this).onSync("leftKeyed",l,this).onSync("rightKeyed",f,this).onSync("queryChanged",d,this).onSync("whitespaceChanged",p,this).onSync("langDirChanged",this._onLangDirChanged,this);
}function n(e){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);t.each(n,function(t){return e[t].apply(e,i)})}}return t.mixin(e.prototype,{_hacks:function i(){var e,n;e=this.input.$input||$("<div>"),n=this.menu.$node||$("<div>"),e.on("blur.tt",function(i){var r,s,o;r=document.activeElement,s=n.is(r),o=n.has(r).length>0,t.isMsie()&&(s||o)&&(i.preventDefault(),i.stopImmediatePropagation(),t.defer(function(){e.focus()}))}),n.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function r(t,e){this.select(e)},_onDatasetCleared:function o(){this._updateHint()},_onDatasetRendered:function u(t,e,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,e)},_onAsyncRequested:function a(t,e,n){this.eventBus.trigger("asyncrequest",n,e)},_onAsyncCanceled:function c(t,e,n){this.eventBus.trigger("asynccancel",n,e)},_onAsyncReceived:function h(t,e,n){this.eventBus.trigger("asyncreceive",n,e)},_onFocused:function l(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function f(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function d(t,e){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&e.preventDefault()},_onTabKeyed:function p(t,e){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&e.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&e.preventDefault()},_onEscKeyed:function g(){this.close()},_onUpKeyed:function m(){this.moveCursor(-1)},_onDownKeyed:function y(){this.moveCursor(1)},_onLeftKeyed:function v(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function _(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function b(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function w(){this._updateHint()},_onLangDirChanged:function S(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function x(){this.isActive()&&this.open()},_minLengthMet:function A(e){return e=t.isString(e)?e:this.input.getQuery()||"",e.length>=this.minLength},_updateHint:function k(){var e,n,i,r,o,u,a;e=this.menu.getTopSelectable(),n=this.menu.getSelectableData(e),i=this.input.getInputValue(),!n||t.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(r=s.normalizeQuery(i),o=t.escapeRegExChars(r),u=new RegExp("^(?:"+o+")(.+$)","i"),a=u.exec(n.val),a&&this.input.setHint(i+a[1]))},isEnabled:function C(){return this.enabled},enable:function q(){this.enabled=!0},disable:function T(){this.enabled=!1},isActive:function D(){return this.active},activate:function I(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function z(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function R(){return this.menu.isOpen()},open:function E(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function F(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function B(e){this.input.setQuery(t.toStr(e))},getVal:function L(){return this.input.getQuery()},select:function K(t){var e=this.menu.getSelectableData(t);return e&&!this.eventBus.before("select",e.obj)?(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0):!1},autocomplete:function j(t){var e,n,i;return e=this.input.getQuery(),n=this.menu.getSelectableData(t),i=n&&e!==n.val,i&&!this.eventBus.before("autocomplete",n.obj)?(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0):!1},moveCursor:function H(t){var e,n,i,r,s;return e=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(t),i=this.menu.getSelectableData(n),r=i?i.obj:null,s=this._minLengthMet()&&this.menu.update(e),s||this.eventBus.before("cursorchange",r)?!1:(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function O(){this.input.destroy(),this.menu.destroy()}}),e}();!function(){"use strict";function i(t,e){t.each(function(){var t=$(this),n;(n=t.data(p.typeahead))&&e(n,t)})}function r(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(h(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function o(t,e){t.data(p.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(n){}return t}function h(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function l(e){var n,i;n=e.data(p.www),i=e.parent().filter(n.selectors.wrapper),t.each(e.data(p.attrs),function(n,i){t.isUndefined(n)?e.removeAttr(i):e.attr(i,n)}),e.removeData(p.typeahead).removeData(p.www).removeData(p.attr).removeClass(n.classes.input),i.length&&(e.detach().insertAfter(i),i.remove())}function f(e){var n,i;return n=t.isJQuery(e)||t.isElement(e),i=n?$(e).first():[],i.length?i:null}var d,p,g;d=$.fn.typeahead,p={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},g={initialize:function m(i,h){function l(){var e,l,g,m,y,v,_,b,w,S,x;t.each(h,function(t){t.highlight=!!i.highlight}),e=$(this),l=$(d.html.wrapper),g=f(i.hint),m=f(i.menu),y=i.hint!==!1&&!g,v=i.menu!==!1&&!m,y&&(g=r(e,d)),v&&(m=$(d.html.menu).css(d.css.menu)),g&&g.val(""),e=o(e,d),(y||v)&&(l.css(d.css.wrapper),e.css(y?d.css.input:d.css.inputWithNoHint),e.wrap(l).parent().prepend(y?g:null).append(v?m:null)),x=v?a:u,_=new n({el:e}),b=new s({hint:g,input:e},d),w=new x({node:m,datasets:h},d),S=new c({input:b,menu:w,eventBus:_,minLength:i.minLength},d),e.data(p.www,d),e.data(p.typeahead,S)}var d;return h=t.isArray(h)?h:[].slice.call(arguments,1),i=i||{},d=e(i.classNames),this.each(l)},isEnabled:function y(){var t;return i(this.first(),function(e){t=e.isEnabled()}),t},enable:function v(){return i(this,function(t){t.enable()}),this},disable:function _(){return i(this,function(t){t.disable()}),this},isActive:function b(){var t;return i(this.first(),function(e){t=e.isActive()}),t},activate:function w(){return i(this,function(t){t.activate()}),this},deactivate:function S(){return i(this,function(t){t.deactivate()}),this},isOpen:function x(){var t;return i(this.first(),function(e){t=e.isOpen()}),t},open:function A(){return i(this,function(t){t.open()}),this},close:function k(){return i(this,function(t){t.close()}),this},select:function C(t){var e=!1,n=$(t);return i(this.first(),function(t){e=t.select(n)}),e},autocomplete:function q(t){var e=!1,n=$(t);return i(this.first(),function(t){e=t.autocomplete(n)}),e},moveCursor:function T(t){var e=!1;return i(this.first(),function(n){e=n.moveCursor(t)}),e},val:function D(t){var e;return arguments.length?(i(this,function(e){e.setVal(t)}),this):(i(this.first(),function(t){e=t.getVal()}),e)},destroy:function I(){return i(this,function(t,e){l(e),t.destroy()}),this}},$.fn.typeahead=function(t){return g[t]?g[t].apply(this,[].slice.call(arguments,1)):g.initialize.apply(this,arguments)},$.fn.typeahead.noConflict=function z(){return $.fn.typeahead=d,this}}()});